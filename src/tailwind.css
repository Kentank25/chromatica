@import "tailwindcss";

@layer base {
	body {
		@apply antialiased text-slate-100;
	}
}

@layer components {
	.btn-main {
		@apply inline-flex items-center justify-center rounded-xl bg-pink-500 text-white font-semibold px-4 py-2.5 shadow-md transition hover:bg-pink-400 disabled:opacity-50 disabled:cursor-not-allowed;
	}
	.btn-secondary {
		@apply inline-flex items-center justify-center rounded-xl border border-slate-600 bg-slate-800/70 text-slate-100 font-semibold px-4 py-2.5 shadow-sm transition hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed;
	}
	.game-container {
		@apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[420px] max-w-[90vw] bg-slate-900/70 border border-slate-800 shadow-2xl rounded-2xl backdrop-blur p-5 space-y-4 z-10;
		@apply max-h-[90vh] overflow-hidden;
	}
	.btn-compact {
		@apply px-2 py-1 text-xs font-semibold;
	}
	.btn-hint {
		@apply inline-flex items-center justify-center w-full rounded-lg bg-purple-500 text-white font-semibold px-3 py-2 transition hover:bg-purple-400 disabled:opacity-50 disabled:cursor-not-allowed;
	}
	.btn-hint-icon {
		@apply inline-flex items-center justify-center rounded-lg bg-purple-500/30 text-purple-200 px-2 py-1 text-xs;
	}
	.btn-pour {
		@apply inline-flex items-center justify-center rounded-lg text-white font-semibold py-3 px-3 shadow-md transition-transform duration-150 disabled:opacity-50 disabled:cursor-not-allowed;
		touch-action: none;
		user-select: none;
	}
	.btn-pour.red {
		@apply bg-rose-500 hover:bg-rose-400;
	}
	.btn-pour.green {
		@apply bg-emerald-500 hover:bg-emerald-400;
	}
	.btn-pour.blue {
		@apply bg-sky-500 hover:bg-sky-400;
	}
	.btn-pour:active {
		@apply scale-95;
	}
	.btn-pour.touching {
		@apply scale-95;
	}

	.icon {
		@apply inline-flex items-center justify-center align-middle;
	}

	.mode-screen {
		@apply fixed inset-0 flex items-center justify-center bg-slate-950/70 backdrop-blur;
	}
	.mode-card {
		@apply bg-slate-900/80 border border-slate-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm text-center space-y-4;
	}
	.mode-howto {
		@apply text-sm;
	}

	.header-stats {
		@apply flex items-center justify-between gap-3 bg-slate-900/60 rounded-xl px-4 py-2;
	}
	.score-display,
	.highscore-display,
	.level-display {
		@apply text-sm font-semibold;
	}

	.stats-bar {
		@apply flex items-center justify-center gap-3 text-xs bg-slate-900/60 rounded-xl px-3 py-2;
	}
	.stat-item {
		@apply px-2.5 py-1 rounded-full bg-slate-800/70;
	}
	.stat-item.success {
		@apply text-emerald-400;
	}
	.stat-item.fail {
		@apply text-rose-400;
	}
	.stat-item.total {
		@apply text-sky-400;
	}

	.customer-area {
		@apply bg-slate-900/60 rounded-xl p-3 flex flex-col gap-2;
	}
	.timer-bar {
		@apply h-2 bg-slate-700 rounded-full overflow-hidden;
	}
	#timer-fill {
		@apply h-full w-full bg-emerald-500 transition-[width] duration-100 ease-linear;
	}

	.waiting-area {
		@apply bg-slate-900/60 rounded-xl p-4 text-center space-y-3;
	}
	.mission-card {
		@apply bg-slate-900/60 rounded-xl p-4 space-y-3;
	}
	.color-preview {
		@apply w-14 h-14 border-2 border-white/60 rounded-lg mx-auto shadow-inner;
	}

	.target-rgb-hint {
		@apply flex items-center justify-center gap-2 text-xs;
	}
	.rgb-preview {
		@apply flex justify-center gap-2 text-xs font-semibold;
	}
	.rgb-value {
		@apply px-2 py-1 rounded bg-slate-800/70;
	}
	.red-text {
		@apply text-rose-400;
	}
	.green-text {
		@apply text-emerald-400;
	}
	.blue-text {
		@apply text-sky-400;
	}

	.controls {
		@apply space-y-3;
	}
	.bottle-group {
		@apply grid grid-cols-3 gap-2;
	}
	.action-group {
		@apply grid grid-cols-2 gap-2;
	}

	.cauldron-area {
		@apply flex justify-center;
	}
	.cauldron {
		@apply relative w-[110px] h-[120px] border-4 border-purple-700 border-t-0 rounded-b-[40px] overflow-hidden bg-white/5;
	}
	.cauldron.level-easy {
		@apply border-emerald-500;
	}
	.cauldron.level-medium {
		@apply border-amber-500;
	}
	.cauldron.level-hard {
		@apply border-rose-500;
	}
	#liquid {
		@apply absolute bottom-0 w-full h-0 transition-[height] duration-100 ease-linear;
	}
	#bubbles-container {
		@apply absolute inset-0 overflow-hidden;
	}
	#confetti-container {
		@apply fixed inset-0 pointer-events-none z-40;
	}

	.bubble-lite {
		@apply absolute bottom-0 left-1/2 w-2.5 h-2.5 bg-white/40 rounded-full;
		animation: bubble-rise 0.6s ease-out forwards;
		transform: translateX(-50%);
	}
	.confetti-lite {
		@apply absolute top-0 left-1/2 w-1.5 h-2.5 rounded-sm;
		background: linear-gradient(180deg, #f1c40f, #e94560);
		animation: confetti-fall 0.8s ease-out forwards;
		transform: translateX(-50%);
	}
	.smoke-lite {
		@apply absolute w-10 h-10 rounded-full;
		background: radial-gradient(circle, rgba(100,100,100,0.45) 0%, transparent 70%);
		animation: smoke-rise 1s ease-out forwards;
	}

	.modal {
		@apply fixed inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm z-50;
	}
	.modal-content {
		@apply bg-slate-900/90 border border-slate-800 rounded-2xl p-6 shadow-2xl text-center space-y-3;
	}
	.tutorial-content {
		@apply space-y-4;
	}
	.tutorial-steps {
		@apply grid grid-cols-1 gap-3;
	}
	.tutorial-step {
		@apply flex items-center gap-3 bg-slate-800/60 p-3 rounded-xl;
	}
	.step-icon {
		@apply text-lg;
	}
	.dont-show-again {
		@apply flex items-center gap-2 text-xs text-slate-300 justify-center;
	}

	.bonus-text {
		@apply text-amber-300 font-bold text-lg;
	}
	.combo-text {
		@apply text-rose-300 text-sm;
	}

	.btn-achievement {
		@apply inline-flex items-center justify-center text-lg px-2 py-1 transition;
	}
	.btn-achievement:hover {
		@apply scale-110;
	}
	.achievement-content {
		@apply max-w-sm max-h-[80vh] overflow-y-auto;
	}
	.achievement-list {
		@apply flex flex-col gap-3 my-4 max-h-[320px] overflow-y-auto;
	}
	.achievement-item {
		@apply flex items-center gap-3 p-3 bg-slate-800/60 rounded-xl text-left;
	}
	.achievement-item.locked {
		@apply opacity-50 grayscale;
	}
	.achievement-item.unlocked {
		@apply border border-amber-400/60 shadow-[0_0_10px_rgba(241,196,15,0.3)];
	}
	.achievement-item .achievement-icon {
		@apply inline-flex items-center justify-center w-6 h-6 text-amber-300;
	}
	.achievement-info h4 {
		@apply m-0 text-sm text-white;
	}
	.achievement-info p {
		@apply m-0 text-xs text-slate-300;
	}

	.achievement-popup {
		@apply fixed top-5 left-1/2 -translate-x-1/2 -translate-y-24 bg-gradient-to-br from-amber-300 to-amber-500 text-slate-950 px-5 py-3 rounded-2xl flex items-center gap-3 z-50 shadow-xl;
		animation: popup-slide 3s ease forwards;
	}
	.achievement-popup.hidden {
		@apply hidden;
	}
	.achievement-popup .popup-icon i {
		@apply text-slate-900;
	}

	.waiting-area p {
		@apply text-slate-300;
	}
	#hint {
		@apply text-xs text-slate-400;
	}

	.pulse-btn {
		animation: pulse 2s infinite;
	}

	.no-scroll {
		overflow: hidden;
	}
}

@keyframes bubble-rise {
	0% {
		transform: translateX(-50%) translateY(0) scale(1);
		opacity: 0.7;
	}
	100% {
		transform: translateX(-50%) translateY(-100px) scale(0.5);
		opacity: 0;
	}
}

@keyframes confetti-fall {
	0% {
		transform: translateX(-50%) translateY(-10px) rotate(0deg);
		opacity: 1;
	}
	100% {
		transform: translateX(-50%) translateY(100vh) rotate(720deg);
		opacity: 0;
	}
}

@keyframes smoke-rise {
	0% {
		transform: translateY(0) scale(1);
		opacity: 0.8;
	}
	100% {
		transform: translateY(-150px) scale(2);
		opacity: 0;
	}
}

@keyframes pulse {
	0% {
		box-shadow: 0 0 0 0 rgba(233, 69, 96, 0.7);
	}
	70% {
		box-shadow: 0 0 0 15px rgba(233, 69, 96, 0);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(233, 69, 96, 0);
	}
}

@keyframes popup-slide {
	0% {
		opacity: 0;
		transform: translate(-50%, -150%);
	}
	10% {
		opacity: 1;
		transform: translate(-50%, 0);
	}
	80% {
		opacity: 1;
		transform: translate(-50%, 0);
	}
	100% {
		opacity: 0;
		transform: translate(-50%, -150%);
	}
}
